!function(e){function t(n){if(a[n])return a[n].exports;var r=a[n]={exports:{},id:n,loaded:!1};return e[n].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var a={};return t.m=e,t.c=a,t.p="/pub/build/",t(0)}({0:function(e,t,a){e.exports=a(4409)},4409:function(e,t){"use strict";!function(e,t){function a(a){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"def",r=a.replace(/\/+$/,""),i="_dp_instinfoload_",o="dp"+n+"loader",l=o+"_assets_url",d=o+"_time",s="DESKPRO_ASSETS_URL",c=function(t){if(e[s]=t,e.localStorage)try{e.localStorage[l]=t,e.localStorage[d]=(new Date).getTime()}catch(e){}},u=function(){return e.DESKPRO_ASSETS_URL||null},p=function(){return{assetUrl:u(),helpdeskUrl:r,instId:n}},v=function(){return!!u()},f=e[i]||{cbs:[],hasSent:!1,handler:function(a){if(a){var r=v();if(c(a.assetUrl),!r)for(var o=0;o<e[i].cbs.length;o+=1)e[i].cbs[o](p(),e,t,n)}}};"undefined"==typeof e[i]&&(e[i]=f);var h=function(){if(!f.hasSent){f.hasSent=!0;var e=t.createElement("script");e.type="application/javascript",e.async=!0,e.src=r+"/dyn-assets/inst_info.js?callback="+i+".handler",(t.getElementsByTagName("head")[0]||t.body).appendChild(e)}};if(!v()&&e.localStorage&&e.localStorage[l]&&e.localStorage[d]){var g=parseInt(e.localStorage[d],10)||0;(new Date).getTime()-86400>g&&(e[s]=e.localStorage[l],(new Date).getTime()-180>g&&h())}return v()?{then:function(a){a(p(),e,t,n)}}:(h(),{then:function(a){e[i].cbs.push(function(r){a(r,e,t,n)})}})}function n(a){!t.readyState||"complete"!==t.readyState&&"interactive"!==t.readyState?t.addEventListener?t.addEventListener("DOMContentLoaded",a):e.attachEvent&&e.attachEvent("onload",a):a()}function r(){if(l)return l;var a=/^\d{8,9}-[A-Z0-9]{8}-[A-Z0-9]{8}-[A-Z0-9]{6}-[A-Z]{3}$/;if(e.DP_VISITOR_ID&&e.DP_VISITOR_ID.match(a))return l=e.DP_VISITOR_ID;var n=t.cookie.match("(^|;)\\s*dp__v\\s*=\\s*([^;]+)");if(n=n?n.pop():null,n&&!n.match(a)&&(n=null),!n){n=function(){for(var e=Math.floor((new Date).getTime()/1e3/60)+"-",t="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",a="ABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;8>n;n+=1)e+=t.charAt(Math.floor(Math.random()*t.length));e+="-";for(var r=0;8>r;r+=1)e+=t.charAt(Math.floor(Math.random()*t.length));e+="-";for(var i=0;6>i;i+=1)e+=t.charAt(Math.floor(Math.random()*t.length));e+="-";for(var o=0;3>o;o+=1)e+=a.charAt(Math.floor(Math.random()*a.length));return e}();var r=new Date;r.setTime(r.getTime()+63072e6),t.cookie="dp__v="+n+";expires="+r.toGMTString()+";path=/"}return l=n,e.DP_VISITOR_ID=l,n}function i(a){var n=a||{},i=n.url||e.DP_PAGE_URL||e.location.href,o=n.title||e.DP_PAGE_TITLE||t.title||null,l=n.referrer||e.DP_PAGE_REFERRER||t.referrer||null,d=n.pageType||e.DP_PAGE_TYPE||"page",s=n.pageId||e.DP_PAGE_ID||"page",c=n.meta||e.DP_PAGE_META||{},u=r();return!c.pageTitle&&o&&(c.pageTitle=o),{url:i,pageTitle:o,referrer:l,pageType:d,pageId:s,meta:c,visitorId:u}}function o(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{bubbles:!1,cancelable:!1,detail:void 0},n=t.createEvent("CustomEvent");return n.initCustomEvent(e,a.bubbles,a.cancelable,a.detail),n}var l=null,d=e.DESKPRO_WIDGET_OPTIONS;o.prototype=e.Event.prototype,e.WidgetEvent=o;var s=function(e){return"dpwidget"+e};e.addEventListener("message",function(t){e.dispatchEvent(new o(s(t.data.type),{detail:t.data.options}))},!1);var c=function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.dp_loader&&e.dp_loader.postMessage({type:t,options:a},"*")},u=function(t,a){return e.addEventListener(s(t),a,!1)},p=function(t,a){return e.removeEventListener(s(t),a,!1)},v=function(){return c("getWidgetStatus")},f=function(){return c("getOnlineAgents")},h=function(e){e&&e.preventDefault(),c("openWidget")};e.DpWidget={addWidgetListener:u,removeWidgetListener:p,getWidgetStatus:v,getOnlineAgents:f,openWidget:h,dispatchCustomEvent:c};var g=function(e,a){var n=!0,r=!1,i=void 0;try{for(var o,l=(e||"").split(",")[Symbol.iterator]();!(n=(o=l.next()).done);n=!0){var d=o.value,s=[].slice.call(t.getElementsByClassName(d)),c=!0,u=!1,p=void 0;try{for(var v,f=s[Symbol.iterator]();!(c=(v=f.next()).done);c=!0){var h=v.value;a(h)}}catch(e){u=!0,p=e}finally{try{!c&&f.return&&f.return()}finally{if(u)throw p}}}}catch(e){r=!0,i=e}finally{try{!n&&l.return&&l.return()}finally{if(r)throw i}}},_=!1;u("widgetStatus",function(t){var a=t.detail,n=function(e,t,a){g(e,function(e){e.style[t]=a})};if(a.loaded&&(n("dpwidget-show-on-loaded","display","block"),n("dpwidget-hide-on-loaded","display","none")),a.chatAvailable?(n("dpwidget-show-on-available","display","block"),n("dpwidget-hide-on-available","display","none")):(n("dpwidget-show-on-unavailable","display","block"),n("dpwidget-hide-on-unavailable","display","none")),g("dpwidget-open,dp-chat-trigger",function(e){e.onclick=h}),a.loaded&&!_&&e.CustomEvent){_=!0;var r=new e.CustomEvent("dpwidget.ready",{detail:{DpWidget:e.DpWidget,options:d,chatAvailable:!!a.chatAvailable}});e.dispatchEvent(r)}}),a(d.helpdeskUrl,d.instId||"default").then(function(e){var a=e.helpdeskUrl,r=e.assetUrl+"/pub/build/DeskPRO_WidgetBundle.js",o=function(){var n=t.createElement("iframe");n.src="javascript:false",n.title="",n.role="presentation",n.name="dp_loader",(n.frameElement||n).style.cssText="visibility: hidden; position: absolute; left: -999; width: 0; height: 0",t.body.appendChild(n);var o=n.contentWindow,l=o.document,s=void 0,c=void 0;try{s=l}catch(e){c=t.domain,n.setAttribute("src ",'javascript:var d=document.open();d.domain="'+c+'";void(0);'),s=l}s.open().customLoad=function(){o.DP_HELPDESK_URL=a.replace(/\/$/,"")+"/",o.DP_OPTIONS=d,o.DESKPRO_BASE_URL=a.replace(/\/$/,"")+"/portal/api/",o.DESKPRO_APP_ASSETS_URL=e.assetUrl,o.DP_SEND_VISITOR_TRACK=i();var n=t.createElement("link");n.setAttribute("type","text/css"),n.setAttribute("rel","stylesheet"),n.setAttribute("href",o.DESKPRO_APP_ASSETS_URL+"/pub/build/DeskPRO_WidgetBundle_style.css"),s.body.appendChild(n);var l=s.createElement("script");l.setAttribute("charset","UTF8"),l.setAttribute("type","application/javascript"),l.setAttribute("src",r),c&&(s.domain=c),s.body.appendChild(l)},s.write('<body onload="document.customLoad();"><div id="dp_loader_element"></div>'),s.close()};n(o)})}(window,document)}});
//# sourceMappingURL=widget_loader.min.map